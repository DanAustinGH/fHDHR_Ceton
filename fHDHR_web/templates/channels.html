{% extends "base.html" %}

{% block content %}

    <h4 style="text-align: center;">{{ fhdhr.config.dict["fhdhr"]["friendlyname"] }} Channels</h4>

    <div style="text-align: center;">
      <button onclick="OpenLink('/api/tuners?method=scan&redirect=%2Fchannels')">Force Channel Update</a></button><p> Note: This may take some time.</p>
    </div>
    <br>

    <div class="rTable center" style="width:20%">
    {% for key in list(channels_dict.keys()) %}
      <div class="rTableRow">
        <div class="rTableCell">{{ key }}</div>
        <div class="rTableCell">{{ channels_dict[key] }}</div>
      </div>
    {% endfor %}
    </div>

    <br>
    <div style="text-align: center;">
      <button onclick="OpenLink('/channels_editor')">Edit Channels</a></button>
    </div>
    <br>

    <div class="rTable" >
      <div class="rTableHeading">
        <div class="rTableHead">Play</div>
        <div class="rTableHead">Channel Name</div>
        <div class="rTableHead">Channel CallSign</div>
        <div class="rTableHead">Channel Number</div>
        <div class="rTableHead">Channel Thumbnail</div>
        <div class="rTableHead">Enabled</div>
        <div class="rTableHead">Favorite</div>
      </div>

    {% set rowCount = namespace(value=1) %}
    {% for chan_dict in channelslist %}


    {% if (rowCount.value % 2) %}
      <div class="rTableRow">
    {% else %}
         <div class="rTableRowAlternate">
     {% endif %}

         <div class="rTableCell">
          {% if chan_dict["enabled"] %}
            <a href="{{ chan_dict["play_url"] }}">Play</a>
          {% endif %}
         </div>

        <div class="rTableCell">{{ chan_dict["name"] }}</div>
        <div class="rTableCell">{{ chan_dict["callsign"] }}</div>
        <div class="rTableCell">{{ chan_dict["number"] }}</div>

        {% if chan_dict["thumbnail"]  %}
        <div class="rTableCell"><img src="{{ chan_dict["thumbnail"] }}" alt="{{ chan_dict["name"] }}" width="100" height="100"></div>
        {% else %}
        <div class="rTableCell">No Image Available</div>
        {% endif %}

        {% if chan_dict["enabled"]  %}
        <div class="rTableCell">Enabled</div>
        {% else %}
        <div class="rTableCell">Disabled</div>
        {% endif %}

        {% if chan_dict["favorite"]  %}
        <div class="rTableCell">Yes</div>
        {% else %}
         <div class="rTableCell">No</div>
        {% endif %}
      </div>
    {% set rowCount.value = rowCount.value+ 1 %}
    {% endfor %}
    </div>
{% endblock %}
